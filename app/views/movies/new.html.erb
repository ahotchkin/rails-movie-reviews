<h1>Add a Movie to the Database</h1>

<%= form_for @movie do |f| %>
  <%= f.label "Title:" %>
  <%= f.text_field :title %>
  <br><br>
  <%= f.label "Synopsis:" %>
  <%= f.text_area :synopsis %>
  <br><br>
  <%= f.label "Year:" %>
  <%= f.select :year, (Date.today.year-100)..(Date.today.year), :selected => Time.current.year %>
  <br><br>
  <%= f.label "Select an existing genre:" %>
  <%= collection_select :movie, :genre_id, @genres, :id, :name, {:include_blank => "Genres"} %>
  <br><br>
  <%# Causing errors but creating genres.... %>
  <%= f.label "Or create a new genre:" %>
  <%= f.fields_for :genre do |g| %> %>
    <%= g.text_field :name, :id => :genre_id %>
  <% end %>

  <%# still need to try this %>
  <%# <%= f.fields_for :genre, @movie.genre.build do |genre_field| %> %>
    <%# <%= genre_field.text_field :name %> %>
  <%# <% end %> %>

    <%# <%= f.text_field :new_genre_name %> %>


  <br><br>
  <%= f.label "Starring:" %>
  <br>
  <%= f.fields_for :actors do |actor| %>
      <%= actor.label "First Name:" %>
      <%= actor.text_field :first_name %>

      <%= actor.label "Last Name:" %>
      <%= actor.text_field :last_name %>
      <br>
    <% end %>
  <br><br>
  <%= f.submit "Add Movie" %>
<% end %>
